<form class="{{cssClass}}" autocomplete="off">
    <header class="sheet-header">
        <img class="profile-img" src="{{img}}" data-edit="img" title="{{name}}"/>
        <div class="header-fields">
            <h1 class="charname"><input name="name" type="text" value="{{name}}" placeholder="Name"/></h1>
        </div>
    </header>

    {{!-- Sheet Body --}}
    <section class="sheet-body">

        <div class="tab" data-group="primary">
          <span class="flexrow">
            <h3>Type</h3>
              <select class="competence-base flexrow" type="text" name="system.type" value="{{system.type}}" data-dtype="String">
                {{#select system.type}}
                <option value="gun">Gun</option>
                <option value="shell">Shell</option>
                <option value="melee">Melee</option>
                <option value="companion">Companion</option>
                <option value="special">Special</option>
                {{/select}}
              </select> 
          </span>

          <span class="flexrow">
            <h3>Default Skill</h3>
              <select class="competence-base flexrow" type="text" name="system.defaultskill" value="{{system.defaultskill}}" data-dtype="String">
                {{#select system.defaultskill}}
                  {{#each combatSkills as |skill key|}}
                  <option value="{{skill.name}}">{{skill.name}}</option>
                  {{/each}}
                {{/select}}
              </select> 
          </span>

          {{> "systems/foundry-fe2/templates/variations-section.html"}}
          {{> "systems/foundry-fe2/templates/modifications-section.html"}}

          <h3> Keywords</h3>
          <div class="grid grid-3col">
            {{#each keywords as |keywordArray key|}}
            <div>
              <ul>
                {{#each keywordArray as |keyword key|}}
                <li class="item-list item flexrow stack-left">
                  <input type="checkbox" name="system.keywords.{{keyword.key}}.flag" {{checked keyword.flag}}/>
                  <label class="generic-label keyword-label packed-left">{{keyword.label}}</label>
                  {{#if keyword.X}}
                    <input type="text" class="input-numeric-short padd-right" name="system.keywords.{{keyword.key}}.X" value="{{keyword.X}}" data-dtype="String"/>
                  {{/if}}
                  {{#if keyword.Y}}
                    {{#if keyword.labelY}}
                    <label class="generic-label keyword-label  packed-left">{{keyword.labelY}}</label>
                    {{/if}}
                    <input type="text" class="input-numeric-short padd-right" name="system.keywords.{{keyword.key}}.Y" value="{{keyword.Y}}" data-dtype="String"/>
                  {{/if}}
                </li>
                {{/each}}
              </ul>
            </div>
            {{/each}}
          </div>

          <h3>Stats</h3>
          {{> "systems/foundry-fe2/templates/weapon-stats-section.html" stats=system.statstotal isfinal=true title="Final stats" header=true}}
          {{> "systems/foundry-fe2/templates/weapon-stats-section.html" stats=system.stats  isbase=true title="Weapon stats"}}
          {{#each system.variations as |variation key|}}
          {{> "systems/foundry-fe2/templates/weapon-stats-section.html" stats=variation.system.stats  isfinal=false title="Variation" subtitle=variation.name}}
          {{/each}}
          {{#each system.modifications as |modification key|}}
          {{> "systems/foundry-fe2/templates/weapon-stats-section.html" stats=modification.system.stats  isfinal=false title="Modification" subtitle=modification.name}}
          {{/each}}
        
          <h3>Description</h3>
          {{editor system.description target="system.description" button=true owner=owner editable=editable}}
        </div>

    </section>
</form>
